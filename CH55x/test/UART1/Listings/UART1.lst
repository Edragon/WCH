C51 COMPILER V9.56.0.0   UART1                                                             11/08/2019 21:03:01 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE UART1
OBJECT MODULE PLACED IN .\Objects\UART1.obj
COMPILER INVOKED BY: C:\Keil_v5_c51\C51\BIN\C51.EXE UART1.C LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Public) DEBUG OBJECT
                    -EXTEND PRINT(.\Listings\UART1.lst) TABS(2) OBJECT(.\Objects\UART1.obj)

line level    source

   1          
   2          /********************************** (C) COPYRIGHT *******************************
   3          * File Name          : UART1.C
   4          * Author             : WCH
   5          * Version            : V1.0
   6          * Date               : 2018/07/25
   7          * Description        : CH554 ´®¿Ú1ÊÕ·¢  
   8          *******************************************************************************/
   9          
  10          #include "..\Public\CH554.H"                                                          
  11          #include "..\Public\Debug.H"
  12          #include "UART1.H"
  13          #include "stdio.h"
  14          
  15          #pragma  NOAREGS
  16          
  17          /*******************************************************************************
  18          * Function Name  : UART1Setup()
  19          * Description    : CH554´®¿Ú1³õÊ¼»¯
  20          * Input          : None
  21          * Output         : None
  22          * Return         : None
  23          *******************************************************************************/
  24          void UART1Init( )
  25          {
  26   1        U1SM0 = 0;                                                                   //UART1Ñ¡Ôñ8Î»Êý¾ÝÎ»
  27   1        U1SMOD = 1;                                                                  //¿ìËÙÄ£Ê½
  28   1        U1REN = 1;                                                                   //Ê¹ÄÜ½ÓÊÕ
  29   1        SBAUD1 = 0 - FREQ_SYS/16/UART1_BUAD;
  30   1        U1TI = 0;
  31   1      #if UART1_PINMAP  
                  PIN_FUNC |= bUART1_PIN_X;                                                   //Ó³Éäµ½P34(R)¡¢P32(T)
              #endif
  34   1      
  35   1      #if UART1_INTERRUPT                                                            //¿ªÆôÖÐ¶ÏÊ¹ÄÜ
                IE_UART1 = 1; 
                EA = 1;
              #endif  
  39   1      }
  40          /*******************************************************************************
  41          * Function Name  : CH554UART1RcvByte()
  42          * Description    : CH554UART1½ÓÊÕÒ»¸ö×Ö½Ú
  43          * Input          : None
  44          * Output         : None
  45          * Return         : SBUF
  46          *******************************************************************************/
  47          UINT8  CH554UART1RcvByte( )
  48          {
  49   1          while(U1RI == 0);                                                           //²éÑ¯½ÓÊÕ£¬ÖÐ¶Ï·½Ê½¿É²»ÓÃ
  50   1          U1RI = 0;
  51   1          return SBUF1;
  52   1      }
  53          
  54          /*******************************************************************************
C51 COMPILER V9.56.0.0   UART1                                                             11/08/2019 21:03:01 PAGE 2   

  55          * Function Name  : CH554UART1SendByte(UINT8 SendDat)
  56          * Description    : CH554UART1·¢ËÍÒ»¸ö×Ö½Ú
  57          * Input          : UINT8 SendDat£»Òª·¢ËÍµÄÊý¾Ý
  58          * Output         : None
  59          * Return         : None
  60          *******************************************************************************/
  61          void CH554UART1SendByte(UINT8 SendDat)
  62          {
  63   1        SBUF1 = SendDat;                                                             //²éÑ¯·¢ËÍ£¬ÖÐ¶Ï·½Ê½¿É²»ÓÃÏÂ
             -Ãæ2ÌõÓï¾ä,µ«·¢ËÍÇ°ÐèTI=0
  64   1        while(U1TI ==0);
  65   1        U1TI = 0;
  66   1      }
  67          
  68          
  69          #if UART1_INTERRUPT
              /*******************************************************************************
              * Function Name  : UART1Interrupt(void)
              * Description    : UART1 ÖÐ¶Ï·þÎñ³ÌÐò
              *******************************************************************************/
              void UART1Interrupt( void ) interrupt INT_NO_UART1 using 1                       //´®¿Ú1ÖÐ¶Ï·þÎñ³ÌÐò,Ê¹ÓÃ¼
             -Ä´æÆ÷×é1
              {
                UINT8 dat;
                if(U1RI)
                {
                  dat = SBUF1;
                  U1RI = 0;
                  
                  CH554UART1SendByte(dat);
                }
              }
              #endif
  86          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     28    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
